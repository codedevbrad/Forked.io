
model ShoppingList {
  id String @id @default(cuid())
  name String

  user User @relation(fields: [userId], references: [id])
  userId String

  ingredients ShoppingListIngredient[]
  recipes ShoppingListRecipe[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, name])
}


model ShoppingListIngredient {
  id String @id @default(cuid())
  shoppingList ShoppingList @relation(fields: [shoppingListId], references: [id], onDelete: Cascade)
  shoppingListId String
  ingredient Ingredient @relation(fields: [ingredientId], references: [id])
  ingredientId String
  quantity Float
  unit Unit
  
  // Optional: track which recipe this ingredient came from
  recipe Recipe? @relation(fields: [recipeId], references: [id], onDelete: SetNull)
  recipeId String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}


model ShoppingListRecipe {
  id String @id @default(cuid())
  
  shoppingList ShoppingList @relation(fields: [shoppingListId], references: [id], onDelete: Cascade)
  shoppingListId String
  
  recipe Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)
  recipeId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([shoppingListId, recipeId])
}